<section class="p-2 flex flex-col gap-4 h-screen relative overflow-hidden">
  <!-- Encabezado y controles -->
  <div class="sticky top-0 bg-white z-10 pb-2">
    <h1 class="text-[1.5em] font-bold text-orange_primary">Productos</h1>

    <div class="flex flex-col gap-3 w-full mt-3">
      <div class="flex justify-between items-center gap-2">
        <p-inputGroup class="flex-1">
          <p-inputGroupAddon>
            <i class="pi pi-search"></i>
          </p-inputGroupAddon>
          <input
            type="text"
            pInputText
            placeholder="Buscar por nombre"
            class="w-full"
            (input)="applyFilter()"
          />
        </p-inputGroup>

        <p-button
          icon="pi pi-plus"
          severity="success"
          label="Crear"
          (onClick)="handleOpenModal()"
          styleClass="p-button-sm md:p-button"
        />
      </div>

      <div class="flex flex-wrap gap-2">
        <p-dropdown
          [options]="categories()"
          (onChange)="applyFilter()"
          optionLabel="name"
          placeholder="Categoría"
          styleClass="flex-1 min-w-[150px]"
        ></p-dropdown>

        <p-inputNumber
          [showButtons]="true"
          mode="currency"
          currency="COP"
          [(ngModel)]="valuePriceFilter"
          placeholder="Precio máximo"
          styleClass="flex-1 min-w-[150px]"
        ></p-inputNumber>
      </div>
    </div>
  </div>

  <!-- Contenido desplazable -->
  <div class="flex-1 overflow-y-auto">
    <p-dataView [value]="filteredProducts()" [paginator]="true" [rows]="8">
      <ng-template let-product pTemplate="listItem">
        <div class="flex items-center p-2 border-b gap-3">
          <img
            [src]="product.img"
            [alt]="product.title"
            class="w-16 h-16 object-cover rounded"
          >
          <div class="flex-1 min-w-0">
            <h3 class="font-medium truncate">{{ product.title }}</h3>
            <p class="text-sm text-gray-600">{{ product.price | currency:'COP':'symbol':'1.0-0' }}</p>
          </div>
          <div class="flex gap-1">
            <p-button
              icon="pi pi-pencil"
              styleClass="p-button-sm p-button-text"

            ></p-button>
            <p-button
              icon="pi pi-trash"
              styleClass="p-button-sm p-button-text p-button-danger"

            ></p-button>
          </div>
        </div>
      </ng-template>
    </p-dataView>
  </div>

  <!-- Modal -->
  <app-form-product
    [displayModal]="openModal"
    (modalClosed)="openModal()"
  ></app-form-product>
</section>
