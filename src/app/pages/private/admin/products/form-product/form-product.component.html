<section class="flex flex-col p-5">
  <app-nav-bar-back
    [icon]="'pi pi-chevron-left'"
    [router]="'/layout-admin/product-page'"
  ></app-nav-bar-back>
  <form
    [formGroup]="productForm"
    class="space-y-4 mt-20"
    (submit)="saveProduct()"
  >
    <!-- Campo: Título -->
    <div class="flex flex-col gap-1">
      <label for="title" class="font-medium">Título:</label>
      <input
        id="title"
        type="text"
        pInputText
        formControlName="title"
        placeholder="Ingrese el título"
        class="w-full p-2 border rounded-lg"
      />
    </div>

    <!-- Campo: Descripción -->
    <div class="flex flex-col gap-1">
      <label for="description" class="font-medium">Descripción:</label>
      <textarea
        id="description"
        pInputTextarea
        formControlName="description"
        placeholder="Ingrese la descripción"
        class="w-full p-2 border rounded-lg"
      ></textarea>
    </div>

    <!-- Campo: Categoría -->
    <div class="flex flex-col gap-1">
      <label for="category" class="font-medium">Categoría:</label>
      <div class="flex items-center gap-5">
        <p-select
          [options]="categories"
          optionLabel="name"
          placeholder="Selecciona una categoría"
          class="w-full md:w-56"
          formControlName="category"
        />

        <p-button
          icon="pi pi-plus"
          severity="success"
          aria-label="Save"
          (onClick)="toggle($event)"
        />
      </div>
      <p-popover #op>
        <span>Crear categoría</span>
        <form
          class="flex flex-col gap-3 items-center"
          [formGroup]="categoryForm"
          (submit)="saveCategory()"
        >
          <div class="flex flex-col gap-1">
            <label for="title" class="font-medium">Título:</label>
            <input
              id="title"
              type="text"
              pInputText
              formControlName="name"
              placeholder="Ingrese el título"
              class="w-full p-2 border rounded-lg"
            />
          </div>
          <p-button
            icon="pi pi-plus"
            severity="success"
            aria-label="Save"
            label="Crear"
            type="submit"
            (onClick)="toggle($event)"
          />
        </form>
      </p-popover>
    </div>

    <!-- Campo: Disponible -->
    <!--   <div class="flex flex-col gap-1">
    <label for="available" class="font-medium">Disponible:</label>
    <p-inputSwitch
      id="available"
      formControlName="available"
      class="w-full"
    ></p-inputSwitch>
  </div> -->

    <!-- Campo: Precio -->
    <div class="flex flex-col gap-1">
      <label for="price" class="font-medium">Precio:</label>
      <p-inputNumber
        id="price"
        formControlName="price"
        mode="currency"
        currency="USD"
        locale="en-US"
        class="w-full"
      ></p-inputNumber>
    </div>
    <div class="flex justify-center items-center">
      <p-fileupload
        #fu
        mode="advanced"
        chooseLabel="Choose"
        chooseIcon="pi pi-upload"
        name="demo[]"
        accept="image/*"
        maxFileSize="1000000"
        [showUploadButton]="false"
        [previewWidth]="200"
        (onSelect)="onFileChange($event)"
      />


      <!-- <input
        pInput
        type="file"
        formControlName="img"
        accept="image/*"
        (change)="onFileChange($event)"
        placeholder="Selecciona la imagen"
      /> -->
    </div>

    <!-- Botones del formulario -->
    <div class="flex justify-end gap-2">
      <p-button
        type="button"
        label="Cancelar"
        severity="secondary"
        class="w-full md:w-auto"
      ></p-button>
      <p-button
        type="submit"
        label="Guardar"
        severity="primary"
        (onClick)="saveProduct()"
        class="w-full md:w-auto"
      ></p-button>
    </div>
  </form>
  <p-toast />
</section>
