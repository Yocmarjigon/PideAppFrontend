<section class="pb-24">
  <app-nav-bar-back
    [icon]="'pi pi-chevron-left'"
    [router]="'/layout/home-page'"></app-nav-bar-back>
  <div class="pt-14">
    <button
      class="w-full max-w-md mx-auto p-4 bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent active:bg-gray-50 text-left">
      <p class="text-sm font-medium text-gray-500 mb-1">Dirección de entrega</p>
      <p class="text-base font-semibold text-gray-800 truncate">
        {{ address }}
      </p>
    </button>
    <div class="p-3">
      <p class="text-[1.5em] font-semibold text-gray-700 mb-3">Productos</p>
      @for (product of products; track $index) {
        <div class="products-container mt-[20px] mx-[15px] flex flex-col gap-4">
          <div
            class="product flex rounded-xl border border-gray-200 shadow-sm overflow-hidden bg-white">
            <div class="flex flex-col items-center justify-center">
              <img
                src="{{
                  product.img ? product.img : '/assets/images/img-default.jpg'
                }}"
                alt="Arepa de huevo"
                class="w-[100px] h-[100px] object-cover rounded-l-xl" />
            </div>
            <div class="flex flex-1 flex-col justify-between p-3">
              <div class="flex justify-between">
                <h3 class="text-[1.1em] text-gray-800 mb-1">
                  {{ product.title }}
                </h3>
                <p class="text-[1.3em] font-bold text-orange_primary mb-1">
                  {{
                    product.price
                      | currency: 'COP' : 'symbol' : '1.0-0' : 'es-CO'
                  }}
                </p>
              </div>
            </div>
          </div>
        </div>
      }
    </div>

    <!-- Resumen -->
    <div
      class="summary-container mx-[15px] mt-6 bg-white rounded-xl shadow p-4 border border-gray-200">
      <h3 class="text-[1.1em] font-semibold text-gray-700 mb-3">
        Resumen de compra
      </h3>
      <div class="flex justify-between mb-2 text-sm text-gray-600">
        <span>Subtotal</span>
        <span>{{
          subtotal | currency: 'COP' : 'symbol' : '1.0-0' : 'es-CO'
        }}</span>
      </div>
      <div class="flex justify-between mb-2 text-sm text-gray-600">
        <span>Envío</span>
        <span>{{
          shipping | currency: 'COP' : 'symbol' : '1.0-0' : 'es-CO'
        }}</span>
      </div>
      <div
        class="flex justify-between text-md font-semibold text-gray-800 border-t border-gray-200 pt-2">
        <span>Total a pagar</span>
        <span>{{
          total | currency: 'COP' : 'symbol' : '1.0-0' : 'es-CO'
        }}</span>
      </div>

      <!-- Nuevo botón de compra mejorado -->
      <button
        class="w-full mt-4 bg-green-500 hover:bg-orange-600 transition text-white font-semibold py-3 rounded-xl flex justify-center items-center gap-2 text-[1em] shadow-md"
        (click)="buy()"
        >
        <span class="pi pi-shopping-bag text-[1.2em]"></span> Comprar ahora
      </button>
    </div>
  </div>
  <div>
    <div class="flex flex-col gap-1 justify-center items-center">
      <span class="text-[1.1em] font-semibold text-gray-700">Comprobante de pago NEQUI</span>
      <p-fileupload
        #fu
        mode="advanced"
        chooseLabel="Choose"
        chooseIcon="pi pi-upload"
        uploadIcon="pi pi-cloud-upload"
        cancelIcon="pi pi-times"
        name="demo[]"
        accept="image/*"
        maxFileSize="1000000"
        [showUploadButton]="false"
        [previewWidth]="200"
        (onSelect)="onFileChange($event)" />
    </div>
    <img src="/assets/images/qr-nequi-test.webp" alt="">

  </div>
</section>
